```markdown
# Project Summary
The "Talk to My Lawyer" project is a SaaS application designed to streamline the creation and review of legal documents. It serves three main user roles: Subscribers who generate legal letters, Employees who manage sales via coupon codes, and Admins who oversee document approvals. Utilizing AI technology for document drafting, the platform integrates with payment processors for subscription management, enhancing accessibility and efficiency in legal services.

# Project Module Description
The application consists of the following functional modules:
- **User Authentication**: Manages user roles and sessions.
- **Letter Generation**: Enables subscribers to create legal letters using AI.
- **Subscription Management**: Handles user subscriptions and coupon codes.
- **Admin Review**: Provides a dashboard for Admins to review, edit, and approve letters.
- **Email Notifications**: Sends updates to users regarding their letters and subscriptions.
- **PDF Generation**: Converts approved letters into downloadable PDF format.
- **Database Migration**: Contains SQL scripts for setting up necessary database tables.

# Directory Tree
```
ttml_app/
├── main-main/
│   ├── app/
│   │   ├── api/
│   │   ├── dashboard/
│   │   ├── globals.css
│   │   └── layout.tsx
│   ├── components/
│   ├── supabase/
│   ├── scripts/
│   ├── styles/
│   ├── README.md
│   ├── package.json
│   └── migrations/
│       ├── COMPLETE_MIGRATION.sql
│       ├── fixed_005_no_enum.sql
│       └── 012_bulletproof_production_fixes_v2.sql
```

# File Description Inventory
- `app/api/`: Contains API routes for user authentication, letter generation, subscription management, and payment verification.
- `app/dashboard/`: Houses components for admin and user dashboards, including letter management and analytics.
- `components/`: Reusable UI components for the application.
- `supabase/`: Contains database migrations and functions related to the Supabase backend.
- `scripts/`: Scripts for database setup and administrative tasks.
- `styles/`: Global styles for the application.
- `README.md`: Documentation for project setup and usage.
- `migrations/`: SQL scripts for database setup and updates, including `COMPLETE_MIGRATION.sql`, `fixed_005_no_enum.sql`, and `012_bulletproof_production_fixes_v2.sql`.

# Technology Stack
- **Frontend**: Next.js 14, TypeScript, Tailwind CSS
- **Backend**: Supabase, OpenAI GPT-4
- **Payment Processing**: Stripe
- **Email Service**: Resend

# Usage
1. **Install Dependencies**: Run the command to install required packages.
2. **Build the Application**: Use the build command to compile the application.
3. **Run the Application**: Start the application server for local development.
4. **Set Up Database**: Use the `COMPLETE_MIGRATION.sql` file to create necessary tables in Supabase, and apply `fixed_005_no_enum.sql` and `012_bulletproof_production_fixes_v2.sql` for the letter allowance system and production fixes.
